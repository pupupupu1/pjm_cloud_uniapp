(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-talk-talk"],{"24d2":function(t,e,o){"use strict";var s=o("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(o("5530")),i=o("2f62"),a={data:function(){return{url:"rtmp://39.105.78.171:7777/rtmplive/",optionUrl:"rtmp://39.105.78.171:7777/rtmplive/",enableCamera:!1,context:null,sponsor:!0,msgBody:{header:{length:1e4,isImg:!1,isText:!1,isVoice:!1},sourceAccount:"",receiveAccount:"",action:6,time:0,msgBody:""}}},computed:(0,i.mapState)(["accessToken","socketTask","vedioTalkPool","userName"]),created:function(){console.log("准备加载talkMessage监听"),this.socketTask.onMessage((function(t){console.log("收到了一条消息！");JSON.parse(t.data)}))},onReady:function(){var t=this,e=JSON.parse(uni.getStorageSync("userInfo")),o=getCurrentPages(),s=o[o.length-1].options;s.sponsor==e.userName?this.sponsor=!0:this.sponsor=!1,this.url=this.url+this.accessToken+"?account="+e.userName+"&token="+this.accessToken,this.optionUrl=this.optionUrl+"option"+this.accessToken+"?account="+e.userName+"&token="+this.accessToken,console.log(this.sponsor),console.log(this.url),this.context=uni.createLivePusherContext("livePusher",this),setTimeout((function(){t.startLive()}),500)},methods:(0,n.default)((0,n.default)({},(0,i.mapMutations)(["setVedioTalkPool"])),{},{EnableCamera:function(){this.enableCamera=!0},startLive:function(){this.context.start({success:function(t){console.log("livePusher.start:"+JSON.stringify(t))}})},stopLive:function(){this.context.stop({success:function(t){console.log(JSON.stringify(t))}})},close:function(){console.log(this.vedioTalkPool),this.msgBody.receiveAccount=this.vedioTalkPool[0],this.msgBody.sourceAccount=this.userName,this.socketTask.send({data:JSON.stringify(this.msgBody)}),this.setVedioTalkPool([]),this.stopLive(),uni.navigateBack()}})};e.default=a},"676a":function(t,e,o){"use strict";o.r(e);var s=o("9386"),n=o("b9a1");for(var i in n)"default"!==i&&function(t){o.d(e,t,(function(){return n[t]}))}(i);var a,r=o("f0c5"),c=Object(r["a"])(n["default"],s["b"],s["c"],!1,null,"26d49ee4",null,!1,s["a"],a);e["default"]=c.exports},9386:function(t,e,o){"use strict";var s;o.d(e,"b",(function(){return n})),o.d(e,"c",(function(){return i})),o.d(e,"a",(function(){return s}));var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[t.sponsor?o("v-uni-view",[o("v-uni-live-pusher",{attrs:{id:"livePusher",url:t.url,mode:"FHD"}}),o("v-uni-video",{staticStyle:{width:"100vw",height:"700rpx"},attrs:{src:t.optionUrl,autoplay:!0,controls:!0}})],1):o("v-uni-view",[o("v-uni-live-pusher",{attrs:{id:"livePusher",url:t.optionUrl,mode:"FHD"}}),o("v-uni-video",{staticStyle:{width:"100vw",height:"700rpx"},attrs:{src:t.url,autoplay:!0,controls:!0}})],1),o("v-uni-button",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.close.apply(void 0,arguments)}}},[t._v("挂断")])],1)},i=[]},b9a1:function(t,e,o){"use strict";o.r(e);var s=o("24d2"),n=o.n(s);for(var i in s)"default"!==i&&function(t){o.d(e,t,(function(){return s[t]}))}(i);e["default"]=n.a}}]);